<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>turn-mode-3</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="turn-based-game--mode-3">turn-based game + mode #3</h1>
<p>Suppose players P1 and P2 have been matched together. This is the moment where match_id is created and match timer begins.</p>
<h2 id="start-game">Start game</h2>
<p>The game should be started only if entry fee is collected from both players.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-V0ZWST0tDFxtuGtf" height="100%" width="100%" style="max-width:650px;" viewBox="-50 -10 650 395"><g></g><g><line id="actor8726" x1="75" y1="5" x2="75" y2="384" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8727" x1="275" y1="5" x2="275" y2="384" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><line id="actor8728" x1="475" y1="5" x2="475" y2="384" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="175" y="93" class="messageText" style="text-anchor: middle;">send entry fee</text><line x1="75" y1="100" x2="275" y2="100" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="128" class="messageText" style="text-anchor: middle;">send entry fee</text><line x1="475" y1="135" x2="275" y2="135" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="163" class="messageText" style="text-anchor: middle;">please start game</text><line x1="275" y1="170" x2="75" y2="170" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="180" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="204" fill="black" class="noteText"><tspan x="16" fill="black">start game</tspan></text></g><g><text x="375" y="245" class="messageText" style="text-anchor: middle;">please start game</text><line x1="275" y1="252" x2="475" y2="252" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="400" y="262" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="396" y="286" fill="black" class="noteText"><tspan x="416" fill="black">start game</tspan></text></g><g><rect x="0" y="319" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="351.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="319" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="351.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><rect x="400" y="319" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="351.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<p>In the case that P2 does not send the entry fee, the game won’t start and P1 will be refunded after maxMatchDuration timeout.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-cEAuBeYAZC092bor" height="100%" width="100%" style="max-width:650px;" viewBox="-50 -10 650 482"><g></g><g><line id="actor8729" x1="75" y1="5" x2="75" y2="471" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8730" x1="275" y1="5" x2="275" y2="471" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><line id="actor8731" x1="475" y1="5" x2="475" y2="471" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="175" y="93" class="messageText" style="text-anchor: middle;">send entry fee</text><line x1="75" y1="100" x2="275" y2="100" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="128" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="75" y1="135" x2="275" y2="135" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="163" class="messageText" style="text-anchor: middle;">status: waiting for entry fee</text><line x1="275" y1="170" x2="75" y2="170" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="400" y="180" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="396" y="204" fill="black" class="noteText"><tspan x="416" fill="black">not send entry fee</tspan></text></g><g><rect x="200" y="227" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="196" y="251" fill="black" class="noteText"><tspan x="216" fill="black">match timeout</tspan></text><text x="196" y="268" fill="black" class="noteText"><tspan x="216" fill="black">exceeded</tspan></text></g><g><text x="175" y="309" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="75" y1="316" x2="275" y2="316" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="344" class="messageText" style="text-anchor: middle;">status: fail to start match</text><line x1="275" y1="351" x2="75" y2="351" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="379" class="messageText" style="text-anchor: middle;">refund entry fee</text><line x1="275" y1="386" x2="75" y2="386" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="406" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="438.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="406" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="438.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><rect x="400" y="406" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="438.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<h2 id="first-turn-player">First Turn Player</h2>
<p><strong>Way #1</strong>: After game start, the first-turn player will be decided randomly by the CelerX Server and notified to both players via onTurnStarted(playerId) callback to let deveoper implement necessary logic.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-R0EDKI9VhWiZXcpw" height="100%" width="100%" style="max-width:650px;" viewBox="-50 -10 650 389"><g></g><g><line id="actor8732" x1="75" y1="5" x2="75" y2="378" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">CelerX Server</tspan></text></g><g><line id="actor8733" x1="275" y1="5" x2="275" y2="378" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P1</tspan></text></g><g><line id="actor8734" x1="475" y1="5" x2="475" y2="378" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="-4" y="99" fill="black" class="noteText"><tspan x="16" fill="black">determine first-turn</tspan></text><text x="-4" y="116" fill="black" class="noteText"><tspan x="16" fill="black">player</tspan></text></g><g><text x="175" y="157" class="messageText" style="text-anchor: middle;">P1 moves first</text><line x1="75" y1="164" x2="275" y2="164" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="200" y="174" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="196" y="198" fill="black" class="noteText"><tspan x="216" fill="black">onTurnStarted(P1)</tspan></text></g><g><text x="275" y="239" class="messageText" style="text-anchor: middle;">P1 moves first</text><line x1="75" y1="246" x2="475" y2="246" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="400" y="256" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="396" y="280" fill="black" class="noteText"><tspan x="416" fill="black">onTurnStarted(P1)</tspan></text></g><g><rect x="0" y="313" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="345.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">CelerX Server</tspan></text></g><g><rect x="200" y="313" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="345.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P1</tspan></text></g><g><rect x="400" y="313" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="345.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<p><strong>Way #2</strong>: Players call getFirstTurnPlayerId()</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-KeNuLZr8DFB9t6rl" height="100%" width="100%" style="max-width:650px;" viewBox="-50 -10 650 395"><g></g><g><line id="actor8735" x1="75" y1="5" x2="75" y2="384" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8736" x1="275" y1="5" x2="275" y2="384" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><line id="actor8737" x1="475" y1="5" x2="475" y2="384" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="99" fill="black" class="noteText"><tspan x="16" fill="black">getFirstTurnPlayerId()</tspan></text></g><g><text x="175" y="140" class="messageText" style="text-anchor: middle;">tell me first turn player id</text><line x1="75" y1="147" x2="275" y2="147" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="175" class="messageText" style="text-anchor: middle;">P1 move first</text><line x1="275" y1="182" x2="75" y2="182" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="400" y="192" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="396" y="216" fill="black" class="noteText"><tspan x="416" fill="black">getFirstTurnPlayerId()</tspan></text></g><g><text x="375" y="257" class="messageText" style="text-anchor: middle;">tell me first turn player id</text><line x1="475" y1="264" x2="275" y2="264" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="292" class="messageText" style="text-anchor: middle;">P1 move first</text><line x1="275" y1="299" x2="475" y2="299" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="319" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="351.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="319" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="351.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><rect x="400" y="319" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="351.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<h2 id="exchange-state">Exchange state</h2>
<p>Signature is not required.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-cs991W6FriHytroz" height="100%" width="100%" style="max-width:450px;" viewBox="-50 -10 450 325"><g></g><g><line id="actor8738" x1="75" y1="5" x2="75" y2="314" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8739" x1="275" y1="5" x2="275" y2="314" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="175" y="93" class="messageText" style="text-anchor: middle;">sendState(s1)</text><line x1="75" y1="100" x2="275" y2="100" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="200" y="110" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="196" y="134" fill="black" class="noteText"><tspan x="216" fill="black">onStateReceived(s1)</tspan></text></g><g><text x="175" y="175" class="messageText" style="text-anchor: middle;">sendState(s2)</text><line x1="275" y1="182" x2="75" y2="182" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="192" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="216" fill="black" class="noteText"><tspan x="16" fill="black">onStateReceived(s2)</tspan></text></g><g><rect x="0" y="249" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="281.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="249" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="281.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P2</tspan></text></g></svg></div>
<h2 id="end-game">End Game</h2>
<h3 id="end-game-normally">End game normally</h3>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-XebABYCBSHEM2Lgb" height="100%" width="100%" style="max-width:750px;" viewBox="-150 -10 750 547"><g></g><g><line id="actor8740" x1="75" y1="5" x2="75" y2="536" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8741" x1="275" y1="5" x2="275" y2="536" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><line id="actor8742" x1="475" y1="5" x2="475" y2="536" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="-100" y="75" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-104" y="99" fill="black" class="noteText"><tspan x="-84" fill="black">suppose P1 wins</tspan></text></g><g><rect x="0" y="122" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="146" fill="black" class="noteText"><tspan x="16" fill="black">endWithWinner(P1)</tspan></text></g><g><text x="175" y="187" class="messageText" style="text-anchor: middle;">winner is P1</text><line x1="75" y1="194" x2="275" y2="194" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="400" y="204" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="396" y="228" fill="black" class="noteText"><tspan x="416" fill="black">endWithWinner(P1)</tspan></text></g><g><text x="375" y="269" class="messageText" style="text-anchor: middle;">winner is P1</text><line x1="475" y1="276" x2="275" y2="276" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="304" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="475" y1="311" x2="275" y2="311" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="339" class="messageText" style="text-anchor: middle;">status: P1 win</text><line x1="275" y1="346" x2="475" y2="346" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="374" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="75" y1="381" x2="275" y2="381" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="409" class="messageText" style="text-anchor: middle;">status: P1 win</text><line x1="275" y1="416" x2="75" y2="416" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="444" class="messageText" style="text-anchor: middle;">send prize</text><line x1="275" y1="451" x2="75" y2="451" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="471" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="503.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="471" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="503.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><rect x="400" y="471" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="503.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<h3 id="end-game-with-conflict-winners">End game with conflict winners</h3>
<p>If conflict winners are reported, then the match will be a <strong>draw</strong> and entry fee will be refunded to players.</p>
<p>In this case, CelerX server should have an error log to alert the abnormal behavior.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-auvkeWqZQpCUKK6r" height="100%" width="100%" style="max-width:650px;" viewBox="-50 -10 650 582"><g></g><g><line id="actor8743" x1="75" y1="5" x2="75" y2="571" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8744" x1="275" y1="5" x2="275" y2="571" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><line id="actor8745" x1="475" y1="5" x2="475" y2="571" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="99" fill="black" class="noteText"><tspan x="16" fill="black">endWithWinner(P1)</tspan></text></g><g><text x="175" y="140" class="messageText" style="text-anchor: middle;">winner is P1</text><line x1="75" y1="147" x2="275" y2="147" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="400" y="157" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="396" y="181" fill="black" class="noteText"><tspan x="416" fill="black">endWithWinner(P2)</tspan></text></g><g><text x="375" y="222" class="messageText" style="text-anchor: middle;">winner is P2</text><line x1="475" y1="229" x2="275" y2="229" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="200" y="239" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="196" y="263" fill="black" class="noteText"><tspan x="216" fill="black">conflict winners</tspan></text></g><g><text x="375" y="304" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="475" y1="311" x2="275" y2="311" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="339" class="messageText" style="text-anchor: middle;">status: draw</text><line x1="275" y1="346" x2="475" y2="346" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="374" class="messageText" style="text-anchor: middle;">refund entry fee</text><line x1="275" y1="381" x2="475" y2="381" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="409" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="75" y1="416" x2="275" y2="416" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="444" class="messageText" style="text-anchor: middle;">status: draw</text><line x1="275" y1="451" x2="75" y2="451" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="479" class="messageText" style="text-anchor: middle;">refund entry fee</text><line x1="275" y1="486" x2="75" y2="486" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="506" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="538.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="506" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="538.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><rect x="400" y="506" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="538.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<h2 id="player-actively-aborts-game-surrender">Player actively aborts game (“surrender”)</h2>
<p>If P1 actively aborts the game by clicking the “abort” button, then the winner will be P2 and the prize will be sent immediately.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-U486l6tp4GzIC23b" height="100%" width="100%" style="max-width:650px;" viewBox="-50 -10 650 383"><g></g><g><line id="actor8746" x1="75" y1="5" x2="75" y2="372" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8747" x1="275" y1="5" x2="275" y2="372" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><line id="actor8748" x1="475" y1="5" x2="475" y2="372" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="99" fill="black" class="noteText"><tspan x="16" fill="black">actively abort game</tspan></text></g><g><text x="175" y="140" class="messageText" style="text-anchor: middle;">I abort game</text><line x1="75" y1="147" x2="275" y2="147" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="175" class="messageText" style="text-anchor: middle;">P1 abort game</text><line x1="275" y1="182" x2="475" y2="182" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="210" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="475" y1="217" x2="275" y2="217" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="245" class="messageText" style="text-anchor: middle;">status: P2 win</text><line x1="275" y1="252" x2="475" y2="252" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="280" class="messageText" style="text-anchor: middle;">send prize</text><line x1="275" y1="287" x2="475" y2="287" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="307" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="339.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="307" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="339.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><rect x="400" y="307" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="339.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<h2 id="player-turn-timeout">Player Turn Timeout</h2>
<p>If CelerX Server finds that P1 exceeds his turn timeout, the winner will be P2.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-In7uQxGPotLkcXjJ" height="100%" width="100%" style="max-width:650px;" viewBox="-50 -10 650 477"><g></g><g><line id="actor8749" x1="75" y1="5" x2="75" y2="466" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8750" x1="275" y1="5" x2="275" y2="466" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><line id="actor8751" x1="475" y1="5" x2="475" y2="466" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="99" fill="black" class="noteText"><tspan x="16" fill="black">turn timeout</tspan></text></g><g><rect x="200" y="122" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="196" y="146" fill="black" class="noteText"><tspan x="216" fill="black">find P1 turn timeout</tspan></text></g><g><rect x="400" y="169" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="396" y="193" fill="black" class="noteText"><tspan x="416" fill="black">find P1 turn timeout</tspan></text></g><g><text x="375" y="234" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="475" y1="241" x2="275" y2="241" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="269" class="messageText" style="text-anchor: middle;">status: P2 win</text><line x1="275" y1="276" x2="475" y2="276" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="375" y="304" class="messageText" style="text-anchor: middle;">send prize</text><line x1="275" y1="311" x2="475" y2="311" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="339" class="messageText" style="text-anchor: middle;">please tell me match status</text><line x1="75" y1="346" x2="275" y2="346" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="374" class="messageText" style="text-anchor: middle;">status: P2 win</text><line x1="275" y1="381" x2="75" y2="381" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="401" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="433.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="401" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="433.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">CelerX Server</tspan></text></g><g><rect x="400" y="401" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="433.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">P2</tspan></text></g></svg></div>
<h2 id="player-connectivity-handling-optional">Player Connectivity Handling (optional)</h2>
<p>We provide two optional FYI callbacks “onOpponentStatus(status)” and “onMyStatus(status)” for developers to customize game logic when player connectity status changes, where status could be “hasLostConnection”, “hasReconnected” and “hasLeftRoom”.</p>
<p>Example use cases of these callbacks are as follows:</p>
<p><strong>Use case 1: P1 temporarily lost connection and then reconnects successfully</strong></p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-UM556aNpDgRbLl75" height="100%" width="100%" style="max-width:450px;" viewBox="-50 -10 450 511"><g></g><g><line id="actor8752" x1="75" y1="5" x2="75" y2="500" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8753" x1="275" y1="5" x2="275" y2="500" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="-4" y="99" fill="black" class="noteText"><tspan x="16" fill="black">connection lost</tspan></text><text x="-4" y="116" fill="black" class="noteText"><tspan x="16" fill="black">trying to reconnect</tspan></text></g><g><rect x="200" y="139" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="196" y="163" fill="black" class="noteText"><tspan x="216" fill="black">onOpponentStatus(status)</tspan></text><text x="196" y="180" fill="black" class="noteText"><tspan x="216" fill="black">status=hasLostConnection</tspan></text></g><g><rect x="200" y="203" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="196" y="227" fill="black" class="noteText"><tspan x="216" fill="black">pause game</tspan></text><text x="196" y="244" fill="black" class="noteText"><tspan x="216" fill="black">wait for opponent</tspan></text></g><g><rect x="0" y="267" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="-4" y="291" fill="black" class="noteText"><tspan x="16" fill="black">reonnect successfully</tspan></text></g><g><rect x="200" y="314" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="196" y="338" fill="black" class="noteText"><tspan x="216" fill="black">onOpponentStatus(status)</tspan></text><text x="196" y="355" fill="black" class="noteText"><tspan x="216" fill="black">status=hasReconnected</tspan></text></g><g><rect x="200" y="378" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="196" y="402" fill="black" class="noteText"><tspan x="216" fill="black">continue game</tspan></text></g><g><rect x="0" y="435" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="467.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="435" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="467.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P2</tspan></text></g></svg></div>
<p><strong>Use case 2: P1 lost connection and fails to reconnect to the room</strong></p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-Hd7ofSD9TAB8DyLi" height="100%" width="100%" style="max-width:450px;" viewBox="-50 -10 450 528"><g></g><g><line id="actor8754" x1="75" y1="5" x2="75" y2="517" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><line id="actor8755" x1="275" y1="5" x2="275" y2="517" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P2</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="0" y="75" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="-4" y="99" fill="black" class="noteText"><tspan x="16" fill="black">connection lost</tspan></text><text x="-4" y="116" fill="black" class="noteText"><tspan x="16" fill="black">trying to reconnect</tspan></text></g><g><rect x="200" y="139" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="196" y="163" fill="black" class="noteText"><tspan x="216" fill="black">onOpponentStatus(status)</tspan></text><text x="196" y="180" fill="black" class="noteText"><tspan x="216" fill="black">status=hasLostConnection</tspan></text></g><g><rect x="200" y="203" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="196" y="227" fill="black" class="noteText"><tspan x="216" fill="black">pause game</tspan></text><text x="196" y="244" fill="black" class="noteText"><tspan x="216" fill="black">wait for opponent</tspan></text></g><g><rect x="0" y="267" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="-4" y="291" fill="black" class="noteText"><tspan x="16" fill="black">fail to reconnect</tspan></text><text x="-4" y="308" fill="black" class="noteText"><tspan x="16" fill="black">P1 has left room</tspan></text></g><g><rect x="200" y="331" fill="#EDF2AE" stroke="#666" width="150" height="54" rx="0" ry="0" class="note"></rect><text x="196" y="355" fill="black" class="noteText"><tspan x="216" fill="black">onOpponentStatus(status)</tspan></text><text x="196" y="372" fill="black" class="noteText"><tspan x="216" fill="black">status=hasLeftRoom</tspan></text></g><g><rect x="200" y="395" fill="#EDF2AE" stroke="#666" width="150" height="37" rx="0" ry="0" class="note"></rect><text x="196" y="419" fill="black" class="noteText"><tspan x="216" fill="black">endWithOpponentTimeout()</tspan></text></g><g><rect x="0" y="452" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="484.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">P1</tspan></text></g><g><rect x="200" y="452" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="484.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">P2</tspan></text></g></svg></div>
</div>
</body>

</html>
